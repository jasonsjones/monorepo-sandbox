name: API Postgres test
on: [push]
jobs:
    build:
        name: API test
        runs-on: ubuntu-latest

        services:
            postgres:
                image: postgres:latest
                env:
                    POSTGRES_USER: postgres
                    POSTGRES_PASSWORD: postgres
                options: >-
                    --health-cmd pg_isready --health-interval 10s --health-timeout 5s
                    --health-retries 5
                ports:
                    - 5432:5432

        steps:
            - name: Checkout
              uses: actions/checkout@v2

            - name: Docker?
              run: |
                  which docker

#        steps:
#            - name: Print greeting
#              run: |
#                  echo "Hello github workflows!"

#jobs:
#    container-job:
#        runs-on: ubuntu-latest
#
#        #services:
#        #    postgres:
#        #        image: postgres:latest
#        #        env:
#        #            POSTGRES_USER: postgres
#        #            POSTGRES_PASSWORD: postgres
#        #        options: >-
#        #            --health-cmd pg_isready
#        #            --health-interval 10s
#        #            --health-timeout 5s
#        #            --health-retries 5
#
#        steps:
#            - name: Print greeting
#            run: |
#                echo "Hello github workflows!"
#
#        #- name: Check out code
#        #uses: actions/checkout@v2
#        #- name: Set up db
#        #run: docker exec -i postgres bash < ./db-setup.sh
#        #- name: Install dependencies
#        #run: yarn install
#
